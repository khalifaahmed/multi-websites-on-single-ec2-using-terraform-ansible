const player=document.querySelector(".player"),video=player.querySelector(".viewer"),controlVideo=document.querySelector(".control-video"),progressRange=document.querySelector(".progress-range"),progressBar=document.querySelector(".progress-bar"),currentTime=document.querySelector(".time-elapsed"),duration=document.querySelector(".time-duration"),playBtn=document.getElementById("play-btn"),stopBtn=player.querySelector(".stop"),skipButtons=player.querySelectorAll("[data-skip]"),speakerIcon=player.querySelector("#speaker_icon"),ranges=player.querySelectorAll(".player_slider"),speaker=player.querySelector(".speaker"),volInput=player.querySelector('input[name="volume"]');function showPlayIcon(){playBtn.classList.replace("fa-pause","fa-play"),playBtn.setAttribute("title","Play")}function togglePlay(){video.paused?(video.play(),playBtn.classList.replace("fa-play","fa-pause"),playBtn.setAttribute("title","Pause")):(video.pause(),showPlayIcon())}function stopVideo(){video.currentTime=0,video.pause()}function skip(){video.currentTime+=+this.dataset.skip}function handleRangeUpdate(){video[this.name]=this.value,0===video.volume?speakerIcon.className="fa fa-volume-off":speakerIcon.className="fa fa-volume-up"}let muted=!1;function mute(){muted?(video.volume=1,volInput.value=1,muted=!1,speakerIcon.className="fa fa-volume-up"):(video.volume=0,volInput.value=0,speakerIcon.className="fa fa-volume-off",muted=!0)}function updateProgress(){progressBar.style.width=`${video.currentTime/video.duration*100}%`,currentTime.textContent=`${displayTime(video.currentTime)} /`,duration.textContent=`${displayTime(video.duration)}`;let a=currentTime.textContent.split("")[3];8==a&&setTimeout(()=>{controlVideo.classList.remove("d-none"),document.querySelector(".player_controls").classList.add("d-none"),video.load()},1e3)}function displayTime(b){let c=Math.floor(b/60),a=Math.floor(b%60);return`${c}:${a=a>9?a:`0${a}`}`}function setProgress(b){let a=b.offsetX/progressRange.offsetWidth;progressBar.style.width=`${100*a}%`,video.currentTime=a*video.duration}function scrub(a){let b=a.offsetX/progressRange.offsetWidth*video.duration;video.currentTime=b}document.body.onkeyup=function(a){32==a.keyCode&&togglePlay()},video.addEventListener("timeupdate",updateProgress),video.addEventListener("canplay",updateProgress),progressRange.addEventListener("click",setProgress),video.addEventListener("click",togglePlay),video.addEventListener("keydown",a=>32===a.keyCode&&togglePlay()),playBtn.addEventListener("click",togglePlay),stopBtn.addEventListener("click",stopVideo),skipButtons.forEach(a=>a.addEventListener("click",skip)),ranges.forEach(a=>a.addEventListener("change",handleRangeUpdate)),ranges.forEach(a=>a.addEventListener("mousemove",handleRangeUpdate)),speaker.addEventListener("click",mute);let mouseDown=!1;progressRange.addEventListener("click",scrub),progressRange.addEventListener("mousemove",a=>mouseDown&&scrub(a)),progressRange.addEventListener("mousedown",()=>mouseDown=!0),progressRange.addEventListener("mouseup",()=>mouseDown=!1);const screen_size=player.querySelector(".screenSize"),controls=player.querySelector(".player_controls"),screenSize_icon=player.querySelector("#screenSize_icon");function changeScreenSize(){player.mozRequestFullScreen?(player.mozRequestFullScreen(),screenSize_icon.className="fa fa-compress",video.addEventListener("mouseout",()=>controls.style.transform="translateY(100%) translateX(-5px)"),video.addEventListener("mouseover",()=>controls.style.transform="translateY(0)"),controls.addEventListener("mouseover",()=>controls.style.transform="translateY(0)"),screen_size.addEventListener("click",()=>{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen&&(document.mozCancelFullScreen(),screenSize_icon.className="fa fa-expand")})):player.webkitRequestFullScreen&&(player.webkitRequestFullScreen(),screenSize_icon.className="fa fa-compress",video.addEventListener("mouseout",()=>controls.style.transform="translateY(100%) translateX(-5px)"),video.addEventListener("mouseover",()=>controls.style.transform="translateY(0)"),controls.addEventListener("mouseover",()=>controls.style.transform="translateY(0)"),screen_size.addEventListener("click",()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&(document.webkitExitFullscreen(),screenSize_icon.className="fa fa-expand")}))}screen_size.addEventListener("click",changeScreenSize),controlVideo.addEventListener("click",togglePlay),controlVideo.addEventListener("click",function(){this.classList.add("d-none"),document.querySelector(".player_controls").classList.remove("d-none")})